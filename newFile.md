
### 周五线上问题痛点。

	 1、  由于运营人员 在策略模块 上传大文件，系统Redis体现内存不足，导致其他功能 读写Redis异常，才出现大面积流量异常。
	后跟运营沟通，删除一些没必要的【策略】，才恢复正常。 下午查询Redis状态 发现有一台机器256G内存，基本占满，本想查看
	Redis中 最大KEY/VALUE ，操作全磁盘扫描导致 Redis集群宕机。
  
	2、此刻 立即协调运营 跟媒体沟通 把流量暂停，进行集群修复。同时预案 如果修复不了，重装Redis 影响的范围，以及如何快速
让订单运行正常，初步定性：影响，报表，频次，策略包，恢复流程：1、IP库刷到缓存，2、订单改成【待审核】再重新审核刷内存。3、
当前订单所需【策略包建立】。

C）由于Redis 恢复不了，采取走预案流程。

D ) 问题1：运维随便使用风险命令 。2：预案流程准备不够充分，理应叫上运营，一起评估风险。3：Redis监控理应早就应该做起来的，不该
内存使用出现问题才去解决。



## 系统架构现状

 	A) 监控做的不够完善，防御能力薄弱。例如系统内存、磁盘监控。应用内存监控，应用接口监控。
  
	B）架构设计太集中式，很容易出现单点问题。中间件防御能力未做 事故备案措施，以及事故演练。
	

## 运维安全性问题


	A）应当梳理风险性 命令，再做命令级的权限，降低误操作风险。 

## 架构可优化空间


	A) 系统模块实际是可以做拆分的，很多业务实际依赖程度不高，比如流量筛选、与前端功能模块、以及策略模块。 
	这次故障，Redis集群宕机后，导致前端模块登录不了，也就是说系统已经不可用了。
  
	其实前端登录模块可以不用Redis ，可直接使用memcached代替，那么及时后端出问题也不会导致前端功能不可用。 
  
	B）以后前端迭代功能会越来越多，以目前架构，即使流量筛选没有改造，上线都会重新构建，其实也把一定的风险
	强加到【流量筛选】模块了。像【策略管理】完全可以拆分出去做成独立的模块，虽然增加了通讯耗时，但是一旦策略
	有问题也不会影响【流量筛选】也不会影响到【前端模块】 。而且我们还可以对相应的模块做开关。
  
	比如策略管理：一旦策略有问题，我们可以再解决问题的同时，把策略给关闭掉，虽然损失一定的质量数据，但是能够保证
	系统是可用的状态。其他的功能都是如此例如【频次】【地域】。
  
